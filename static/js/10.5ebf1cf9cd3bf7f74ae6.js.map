{"version":3,"sources":["webpack:///src/views/Cart.vue","webpack:///./src/views/Cart.vue?c648","webpack:///./src/views/Cart.vue"],"names":["Cart","components","_components","defineProperty_default","es","name","data","checked","checkedGoods","goods","computed","submitBarText","count","this","length","totalPrice","_this2","money","reduce","total","item","Number","indexOf","id","price","num","$store","state","sum","inject","methods","change","_this3","map","push","formatPrice","toFixed","onSubmit","orderId","localStorage","setItem","stringify_default","orderList","JSON","parse","getItem","order","i","j","$router","onClickRight","_this","api_try","deleteCart","then","res","reload","beforeMount","mounted","_this4","getCart","n","_id","title","product","descriptions","desc","quantity","thumb","coverImg","pid","updated","beforeUpdate","views_Cart","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","click-right","slot","color","_v","model","value","callback","$$v","expression","_l","key","disabled","button-text","submit","click","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/10.5ebf1cf9cd3bf7f74ae6.js","sourcesContent":["<template>\r\n  <div class=\"cart\">\r\n    <header>\r\n      <van-nav-bar\r\n          title=\"购物车\"\r\n          @click-right=\"onClickRight\"\r\n        >\r\n        <van-icon name=\"delete\" slot=\"right\" color='white' />\r\n        </van-nav-bar>\r\n\r\n    </header>\r\n    <section>\r\n      <van-checkbox-group class=\"card-goods\" v-model=\"checkedGoods\">\r\n        <van-checkbox class=\"card-goods__item\" v-for=\"item in goods\" :key=\"item.id\" :name=\"item.id\">\r\n          <van-card\r\n            :title=\"item.title\"\r\n            :desc=\"item.desc\"\r\n            :num=\"item.num\"\r\n            :price=\"formatPrice(item.price)\"\r\n            :thumb=\"item.thumb\"\r\n          />\r\n        </van-checkbox>\r\n      </van-checkbox-group>\r\n      <van-submit-bar\r\n        :price=\"totalPrice\"\r\n        :disabled=\"!checkedGoods.length\"\r\n        :button-text=\"submitBarText\"\r\n        @submit=\"onSubmit\"\r\n        >\r\n        <van-checkbox v-model=\"checked\" @click=\"change(this)\">全选</van-checkbox>\r\n      </van-submit-bar>\r\n    </section>\r\n    <footer>\r\n      \r\n    </footer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '../api/api_try'\r\nimport { Checkbox, CheckboxGroup, Card, SubmitBar, Toast } from \"vant\";\r\nexport default {\r\n  components: {\r\n    [Card.name]: Card,\r\n    [Checkbox.name]: Checkbox,\r\n    [SubmitBar.name]: SubmitBar,\r\n    [CheckboxGroup.name]: CheckboxGroup\r\n  },\r\n  data() {\r\n    return {\r\n      checked:false,\r\n      checkedGoods: [],\r\n      goods:[]\r\n        // {\r\n        //   id: \"1\",\r\n        //   title: \"进口香蕉\",\r\n        //   desc: \"约250g，2根\",\r\n        //   price: 200,\r\n        //   num: 1,\r\n        //   thumb:\r\n        //     \"https://img.yzcdn.cn/public_files/2017/10/24/2f9a36046449dafb8608e99990b3c205.jpeg\"\r\n        // }\r\n      \r\n    };\r\n  },\r\n  computed: {\r\n    submitBarText() {\r\n      const count = this.checkedGoods.length;\r\n      return \"结算\" + (count ? `(${count})` : \"\");\r\n    },\r\n    totalPrice() {\r\n      let money = this.goods.reduce(\r\n        (total, item) =>\r\n          total + Number(this.checkedGoods.indexOf(item.id) !== -1 ? item.price*item.num : 0),\r\n        0\r\n      );\r\n      this.$store.state.sum = money\r\n      return money\r\n\r\n    }\r\n  },\r\n  inject:['reload'],\r\n   \r\n  methods: {\r\n    change(){\r\n      if(this.checked==false){\r\n        this.goods.map((item)=>{\r\n          this.checkedGoods.push(item.id)\r\n        })\r\n      }else{\r\n        this.checkedGoods=[]\r\n      }\r\n    },\r\n    formatPrice(price) {\r\n      return (price / 100).toFixed(2);\r\n    },\r\n    onSubmit() {\r\n      this.$store.state.orderId = this.checkedGoods;\r\n      localStorage.setItem('orderId',JSON.stringify(this.checkedGoods))\r\n      let orderList = this.$store.state.orderList\r\n        let orderId = JSON.parse(localStorage.getItem('orderId'));\r\n       let order = [];\r\n        for(let i in orderId){\r\n            for(let j in orderList){\r\n                if(orderId[i]==orderList[j].id){\r\n                    order.push(orderList[j])\r\n                }\r\n            }\r\n        }\r\n        this.$store.state.order = order\r\n      \r\n      this.$router.push('/payOrder')\r\n    },\r\n    onClickRight(){\r\n      \r\n      let _this = this\r\n      this.checkedGoods.map(function(i){\r\n        api.deleteCart(i).then(res=>{\r\n          _this.reload()\r\n        })\r\n      })\r\n      \r\n    }\r\n  },\r\n  beforeMount(){\r\n\t\t\t\tif(localStorage.getItem(\"userInfo\")){\r\n\t\t\t\t\tthis.$router.push('/Cart');\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.$router.push('/login');\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\r\n  },\r\n  mounted(){\r\n    if(this.checked==true){\r\n    }\r\n    api.getCart().then(res=>{\r\n      this.goods= res.data.map((i,n)=>{\r\n       return {\r\n          id:`${i._id}`,\r\n          title: `${i.product.descriptions}`,\r\n          desc: \"约250g，2根\",\r\n          price:`${Number(i.product.price*100)}`,\r\n          num:`${i.quantity}`,\r\n          thumb:`${i.product.coverImg}`,\r\n          pid:`${i.product._id}`\r\n        }\r\n      })\r\n      this.$store.state.orderList = this.goods\r\n      localStorage.setItem('orderList',JSON.stringify(this.goods))\r\n    })\r\n    \r\n  },\r\n  updated(){\r\n    \r\n  },\r\n  beforeUpdate(){\r\n   \r\n  }\r\n  \r\n};\r\n</script>\r\n\r\n<style scoped lang='less'>\r\n.van-nav-bar {\r\n  height: 60px;\r\n  line-height: 60px;\r\n  background: rgba(0, 0, 0, 0.8);\r\n}\r\n.van-nav-bar__title {\r\n  color: white;\r\n}\r\n.header {\r\n  z-index: 4;\r\n  height: 60px;\r\n  background: black;\r\n  display: flex;\r\n}\r\n.header p {\r\n  color: whitesmoke;\r\n  margin-left: 165px;\r\n  margin-top: 20px;\r\n}\r\n.icon-del {\r\n  color: whitesmoke;\r\n  margin-left: 125px;\r\n  margin-top: 25px;\r\n}\r\n\r\n.van-submit-bar{\r\n  bottom: 50px;\r\n}\r\n.cart{\r\n  height: 87vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\nsection{\r\n  flex:1;\r\n  overflow: auto;\r\n}\r\n.van-tabbar-item{\r\n  height: 10vh;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n.card-goods {\r\n  padding: 10px 0;\r\n  background-color: #fff;\r\n  &__item {\r\n    position: relative;\r\n    background-color: #fafafa;\r\n    .van-checkbox__label {\r\n      width: 100%;\r\n      height: auto; \r\n      padding: 0 10px 0 15px;\r\n      box-sizing: border-box;\r\n    }\r\n    .van-checkbox__icon {\r\n      top: 50%;\r\n      left: 10px;\r\n      z-index: 1;\r\n      position: absolute;\r\n      margin-top: -10px;\r\n    }\r\n    .van-card__price {\r\n      color: #f44;\r\n    }\r\n  }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/Cart.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cart\"},[_c('header',[_c('van-nav-bar',{attrs:{\"title\":\"购物车\"},on:{\"click-right\":_vm.onClickRight}},[_c('van-icon',{attrs:{\"slot\":\"right\",\"name\":\"delete\",\"color\":\"white\"},slot:\"right\"})],1)],1),_vm._v(\" \"),_c('section',[_c('van-checkbox-group',{staticClass:\"card-goods\",model:{value:(_vm.checkedGoods),callback:function ($$v) {_vm.checkedGoods=$$v},expression:\"checkedGoods\"}},_vm._l((_vm.goods),function(item){return _c('van-checkbox',{key:item.id,staticClass:\"card-goods__item\",attrs:{\"name\":item.id}},[_c('van-card',{attrs:{\"title\":item.title,\"desc\":item.desc,\"num\":item.num,\"price\":_vm.formatPrice(item.price),\"thumb\":item.thumb}})],1)}),1),_vm._v(\" \"),_c('van-submit-bar',{attrs:{\"price\":_vm.totalPrice,\"disabled\":!_vm.checkedGoods.length,\"button-text\":_vm.submitBarText},on:{\"submit\":_vm.onSubmit}},[_c('van-checkbox',{on:{\"click\":function($event){return _vm.change(this)}},model:{value:(_vm.checked),callback:function ($$v) {_vm.checked=$$v},expression:\"checked\"}},[_vm._v(\"全选\")])],1)],1),_vm._v(\" \"),_c('footer')])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d3a19d80\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Cart.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d3a19d80\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rem-loader?{\\\"remUnit\\\":37.5}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Cart.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Cart.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Cart.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d3a19d80\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Cart.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-d3a19d80\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Cart.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}