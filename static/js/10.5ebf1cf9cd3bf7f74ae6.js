webpackJsonp([10],{"1Rb1":function(t,e){},"5Z7Z":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c,r=o("mvHQ"),n=o.n(r),i=o("bOdI"),s=o.n(i),d=o("Jz7l"),a=o("Fd2+"),u={components:(c={},s()(c,a.a.name,a.a),s()(c,a.d.name,a.d),s()(c,a.k.name,a.k),s()(c,a.e.name,a.e),c),data:function(){return{checked:!1,checkedGoods:[],goods:[]}},computed:{submitBarText:function(){var t=this.checkedGoods.length;return"结算"+(t?"("+t+")":"")},totalPrice:function(){var t=this,e=this.goods.reduce(function(e,o){return e+Number(-1!==t.checkedGoods.indexOf(o.id)?o.price*o.num:0)},0);return this.$store.state.sum=e,e}},inject:["reload"],methods:{change:function(){var t=this;0==this.checked?this.goods.map(function(e){t.checkedGoods.push(e.id)}):this.checkedGoods=[]},formatPrice:function(t){return(t/100).toFixed(2)},onSubmit:function(){this.$store.state.orderId=this.checkedGoods,localStorage.setItem("orderId",n()(this.checkedGoods));var t=this.$store.state.orderList,e=JSON.parse(localStorage.getItem("orderId")),o=[];for(var c in e)for(var r in t)e[c]==t[r].id&&o.push(t[r]);this.$store.state.order=o,this.$router.push("/payOrder")},onClickRight:function(){var t=this;this.checkedGoods.map(function(e){d.a.deleteCart(e).then(function(e){t.reload()})})}},beforeMount:function(){localStorage.getItem("userInfo")?this.$router.push("/Cart"):this.$router.push("/login")},mounted:function(){var t=this;this.checked,d.a.getCart().then(function(e){t.goods=e.data.map(function(t,e){return{id:""+t._id,title:""+t.product.descriptions,desc:"约250g，2根",price:""+Number(100*t.product.price),num:""+t.quantity,thumb:""+t.product.coverImg,pid:""+t.product._id}}),t.$store.state.orderList=t.goods,localStorage.setItem("orderList",n()(t.goods))})},updated:function(){},beforeUpdate:function(){}},h={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"cart"},[o("header",[o("van-nav-bar",{attrs:{title:"购物车"},on:{"click-right":t.onClickRight}},[o("van-icon",{attrs:{slot:"right",name:"delete",color:"white"},slot:"right"})],1)],1),t._v(" "),o("section",[o("van-checkbox-group",{staticClass:"card-goods",model:{value:t.checkedGoods,callback:function(e){t.checkedGoods=e},expression:"checkedGoods"}},t._l(t.goods,function(e){return o("van-checkbox",{key:e.id,staticClass:"card-goods__item",attrs:{name:e.id}},[o("van-card",{attrs:{title:e.title,desc:e.desc,num:e.num,price:t.formatPrice(e.price),thumb:e.thumb}})],1)}),1),t._v(" "),o("van-submit-bar",{attrs:{price:t.totalPrice,disabled:!t.checkedGoods.length,"button-text":t.submitBarText},on:{submit:t.onSubmit}},[o("van-checkbox",{on:{click:function(e){return t.change(this)}},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("全选")])],1)],1),t._v(" "),o("footer")])},staticRenderFns:[]};var l=o("VU/8")(u,h,!1,function(t){o("1Rb1")},"data-v-d3a19d80",null);e.default=l.exports}});
//# sourceMappingURL=10.5ebf1cf9cd3bf7f74ae6.js.map